{% extends 'pages/base.html' %}

{% block scripts %}
<script>
  function formErrorBox(errors, inputTarget, errorSource) {
    if (errors) {
      jQuery(function($) {
        $('#'+inputTarget).popover({content: $('#'+errorSource).html(), container: 'body', placement: 'right', html: true}).popover('show');
      });
    }
  }
</script>
{% endblock %}

{% block content %}
    <div class="jumbotron vertical-center">
        <div class="col-12">

        </div>
    </div>

    <div class="jumbotron d-flex align-items-center min-vh-100">
        <div class="container text-center">
            <div class="col-auto formBox">
                <h1 class="p-3">Change Password</h1>
                <div class='page-content'>
                    <form method="post">
                        {% csrf_token %}
                        <div class="form-group m-2">
                            {{ form.old_password }}
                            <div style="display: none;" id='oldPasswordErrors'>
                              {{ form.old_password.errors }}
                            </div>
                            <script>formErrorBox('{{ form.old_password.errors }}', 'oldPasswordInput', 'oldPasswordErrors');</script>
                        </div>
                        <div class="form-group m-2">
                            {{ form.new_password1 }}
                            <div style="display: none;" id='newPassword1Errors'>
                              {{ form.new_password1.errors }}
                            </div>
                            <script>formErrorBox('{{ form.new_password1.errors }}', 'newPassword1Input', 'newPassword1Errors');</script>
                        </div>
                        <div class="form-group m-2">
                            {{ form.new_password2 }}
                            <div style="display: none;" id='newPassword2Errors'>
                              {{ form.new_password2.errors }}
                            </div>
                            <script>formErrorBox('{{ form.new_password2.errors }}', 'newPassword2Input', 'newPassword2Errors');</script>
                        </div>
                        <button type="submit" class="btn btn-warning">Change Password</button>
                        {% if form.non_field_errors %}
                          <div class="form-errors">
                            {% for error in form.non_field_errors %}
                              {{ error }}
                            {% endfor %}
                          </div>
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
      </div>



{% endblock %}